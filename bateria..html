<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Batería Animada con Límite</title>
<style>
  body {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    background: #f8f9fa;
  }

  .battery {
    width: 300px;
    height: 120px;
    border: 8px solid black;
    border-radius: 12px;
    position: relative;
    display: flex;
    justify-content: space-evenly;
    align-items: center;
    padding: 5px;
    box-sizing: border-box;
    background: white;
  }

  .battery::after {
    content: "";
    position: absolute;
    right: -25px;
    top: 35px;
    width: 20px;
    height: 50px;
    background: black;
    border-radius: 3px;
  }

  .cell {
    flex: 1;
    margin: 2px;
    border-radius: 5px;
    background: #ddd;
    height: 90%;
    overflow: hidden;
    position: relative;
  }

  .fill {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 0;
    transition: height 0.8s ease, background 0.5s;
    border-radius: 5px 5px 0 0;
  }

  .green { background: #4caf50; }
  .yellow { background: #ffc107; }
  .red { background: #f44336; }
</style>
</head>
<body>

<div class="battery">
  <div class="cell"><div class="fill" id="fill1"></div></div>
  <div class="cell"><div class="fill" id="fill2"></div></div>
  <div class="cell"><div class="fill" id="fill3"></div></div>
  <div class="cell"><div class="fill" id="fill4"></div></div>
  <div class="cell"><div class="fill" id="fill5"></div></div>
  <div class="cell"><div class="fill" id="fill6"></div></div>
</div>

<script>
const fills = [
  document.getElementById("fill1"),
  document.getElementById("fill2"),
  document.getElementById("fill3"),
  document.getElementById("fill4"),
  document.getElementById("fill5"),
  document.getElementById("fill6"),
];

let level = 1; // Nivel inicial

/**
 * Función para iniciar animación de batería con límite máximo
 * @param {number} maxLevel - Hasta qué celda llenar antes de reiniciar (1-6)
 */
function startBattery(maxLevel) {
  const interval = setInterval(() => {
    // Resetear celdas
    fills.forEach(f => {
      f.style.height = "0";
      f.className = "fill";
    });

    // Llenar hasta el nivel actual
    fills.forEach((f, i) => {
      if (i < level) {
        if (level <= 2) f.classList.add("red");
        else if (level <= 4) f.classList.add("yellow");
        else f.classList.add("green");
        f.style.height = "100%";
      }
    });

    console.log("Nivel actual:", level);

    // Verificar si llegó al nivel máximo
    if (level === maxLevel) {
      level = 0; // Reiniciar
      console.log("¡Se alcanzó el nivel máximo y se reinicia!");
    }

    level++;
  }, 1000);
}

// Ejemplo: llenar hasta la celda 4 antes de reiniciar
startBattery(6);
</script>

</body>
</html>
